<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <a href="./main.html">Back to Menu</a>
    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px 50px;">
        <table id="easy" border="1">
            <caption><h1>Easy</h1></caption>
            <thead>
                <th>Rank</th>
                <th>Player</th>
                <th>High Score</th>
            </thead>
            <tbody>
            </tbody>
        </table>
        <table id="medium" border="1">
            <caption><h1>Medium</h1></caption>
            <thead>
                <th>Rank</th>
                <th>Player</th>
                <th>High Score</th>
            </thead>
            <tbody>
            </tbody>
        </table>
        <table id="hard" border="1">
            <caption><h1>Hard</h1></caption>
            <thead>
                <th>Rank</th>
                <th>Player</th>
                <th>High Score</th>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
    

    <script type="module">
        import { load_data } from './user_info.js';

        document.querySelector('table#easy tbody').innerHTML = ''
        document.querySelector('table#medium tbody').innerHTML = ''
        document.querySelector('table#hard tbody').innerHTML = ''
        let all_players = await load_data();
        let easy_record = [];
        let medium_record = [];
        let hard_record = [];
        all_players.forEach((player) => {
            easy_record.push([player.high_score[0], player.name]);
            medium_record.push([player.high_score[1], player.name]);
            hard_record.push([player.high_score[2], player.name]);
        });
        easy_record.sort((a, b) => b[0] - a[0]);
        medium_record.sort((a, b) => b[0] - a[0]);
        hard_record.sort((a, b) => b[0] - a[0]);

        for (let i = 0; i < easy_record.length; i++) {
            document.querySelector('table#easy tbody').innerHTML += `<tr>
                <td>${i + 1}</td>
                <td>${easy_record[i][1]}</td>
                <td>${easy_record[i][0]}</td>
            </tr>`;
            if (i == 4) break;
        }

        for (let i = 0; i < medium_record.length; i++) {
            document.querySelector('table#medium tbody').innerHTML += `<tr>
                <td>${i + 1}</td>
                <td>${medium_record[i][1]}</td>
                <td>${medium_record[i][0]}</td>
            </tr>`;
            if (i == 4) break;
        }

        for (let i = 0; i < hard_record.length; i++) {
            document.querySelector('table#hard tbody').innerHTML += `<tr>
                <td>${i + 1}</td>
                <td>${hard_record[i][1]}</td>
                <td>${hard_record[i][0]}</td>
            </tr>`;
            if (i == 4) break;
        }
    </script>
</body>
</html>